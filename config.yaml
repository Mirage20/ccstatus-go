# ccstatus Configuration File
# ==========================
#
# This file contains all available configuration options for ccstatus-go,
# a Claude Code statusline generator with provider-component architecture.
#
# Configuration files are searched in the following order (first found wins):
#   1. .claude/ccstatus.local.yaml - Project-specific local config (gitignored)
#   2. .claude/ccstatus.yaml      - Project-specific shared config
#   3. ~/.claude/ccstatus.yaml    - User default config
#
# All values shown below are the defaults used when not specified.
# You can override only the values you want to change.

# ============================================================================
# ACTIVE COMPONENTS
# ============================================================================
# List of components to display in the status line, in order.
# Comment out or remove components you don't want to display.
# Available components:
#   - model              - Shows Claude model name with color coding
#   - context            - Displays token usage in "k" units
#   - cwd                - Current working directory basename
#   - git.branch         - Git branch name with icon
#   - git.status         - Git working tree status (staged/modified/untracked/conflicts)
#   - git.sync           - Git ahead/behind upstream counts
#   - git.stash          - Git stash count
#   - ratelimit.fivehour - Shows 5-hour rate limit from Anthropic API
#   - ratelimit.sevenday - Shows 7-day rate limit from Anthropic API
#   - changes            - Git-style line changes (+added -removed)
#   - duration           - Session and API call duration
#   - version            - Claude Code version
#   - newline            - Line break for multi-line status layouts

# Default component order if not specified:
active:
  - model
  - context
  - ratelimit.fivehour
  - ratelimit.sevenday
  - changes
  - duration
  - version
  - newline
  - cwd
  - git.branch
  - git.status
  - git.sync
  - git.stash

# ============================================================================
# SEPARATOR CONFIGURATION
# ============================================================================
# Defines the separator between status line components

separator:
  # The separator symbol/string to use between components
  # Default: " | "
  symbol: " | "

  # Color of the separator (see color options at the bottom)
  # Default: "gray"
  color: gray

# ============================================================================
# CACHE CONFIGURATION
# ============================================================================
# Controls the caching behavior for provider data

cache:
  # Whether to enable caching (set to false to disable all caching)
  # Default: true
  enabled: true

  # Directory to store cache files
  # Default: "" (empty string means use os.TempDir() with session-specific subfolder)
  dir: ""

# ============================================================================
# PROVIDER CONFIGURATIONS
# ============================================================================
# Providers fetch data that components consume.
# Each provider can have caching configured independently.

providers:
  # ---------------------------------------------------------------------------
  # SESSIONINFO PROVIDER - Provides model, version, and session metadata
  # ---------------------------------------------------------------------------
  sessioninfo:
    cache:
      # Time-to-live for cached data
      # Format: number + unit (s=seconds, m=minutes, h=hours)
      # Default: 0s (no caching - cheap operation, just returns struct fields)
      ttl: 0s

  # ---------------------------------------------------------------------------
  # GIT PROVIDER - Provides git repository information
  # ---------------------------------------------------------------------------
  git:
    cache:
      # Time-to-live for cached git data
      # Default: 10s
      ttl: 10s

  # ---------------------------------------------------------------------------
  # RATELIMIT PROVIDER - Fetches rate limits from Anthropic OAuth API
  # ---------------------------------------------------------------------------
  ratelimit:
    # Time-to-live for global rate limit cache (account-wide, not per-session)
    # Default: 60s
    ttl: 60s

    # Directory for global cache file
    # Default: ~/.cache/ccstatus (or $XDG_CACHE_HOME/ccstatus)
    # cache_dir: ""

# ============================================================================
# COMPONENT CONFIGURATIONS
# ============================================================================
# Each component can be individually configured.
# All components support templates with component-specific variables.

components:
  # ---------------------------------------------------------------------------
  # MODEL COMPONENT
  # Shows the Claude model being used with colored icon
  # ---------------------------------------------------------------------------
  model:
    # Display template with available variables:
    #   {{.ID}}        - The model ID (e.g. "claude-opus-4-1-20250805")
    #   {{.Name}}      - The display name (e.g. "Opus 4.1")
    #   {{.ShortName}} - The extracted short name (e.g. "Opus", "Sonnet", "Haiku")
    #   {{.Icon}}      - The matched icon based on model ID patterns
    # Default: "{{.Icon}} {{.ShortName}}"
    template: "{{.Icon}} {{.ShortName}}"

    # Icons mapped by model pattern (substring match on model ID)
    # Uses Nerd Font icons - see https://www.nerdfonts.com/cheat-sheet
    # Default values shown:
    icons:
      opus: "\uf2db"    # Microchip icon
      sonnet: "\uf2db"  # Microchip icon
      haiku: "\uf2db"   # Microchip icon

    # Colors mapped by model pattern (substring match on model ID)
    # Default values shown:
    colors:
      opus: magenta
      sonnet: cyan
      haiku: green

  # ---------------------------------------------------------------------------
  # CONTEXT COMPONENT
  # Shows token usage with color-coded thresholds
  # ---------------------------------------------------------------------------
  context:
    # Display template with available variables:
    #   {{.Icon}}       - The configured icon
    #   {{.Total}}      - Total token count (raw number)
    #   {{.Formatted}}  - Formatted token count with unit (e.g. "22k")
    #   {{.Percentage}} - Usage percentage as float (use {{printf "%.0f" .Percentage}} for whole number)
    #   {{.Limit}}      - Context limit (from session or config fallback)
    # Default: "{{.Icon}} {{.Formatted}}"
    template: "{{.Icon}} {{.Formatted}}"

    # Icon for context display
    # Default: "\uea7b" (Context/Tokens icon)
    icon: "\uea7b"

    # Context limit in tokens (fallback when context_window_size is not available)
    # Default: 200000 (200k for Claude models)
    context_limit: 200000

    # Threshold percentages for color changes
    # Default: 60.0
    warning_threshold: 60.0
    # Default: 75.0
    critical_threshold: 75.0

    # Colors for different usage levels
    # Default: "green"
    normal_color: green
    # Default: "yellow"
    warning_color: yellow
    # Default: "red"
    critical_color: red

  # ---------------------------------------------------------------------------
  # CWD COMPONENT
  # Shows current working directory basename
  # ---------------------------------------------------------------------------
  cwd:
    # Display template with available variables:
    #   {{.Dir}}  - The current directory basename (e.g. "providers")
    #   {{.Icon}} - The configured icon
    # Default: "{{.Icon}} {{.Dir}}"
    template: "{{.Icon}} {{.Dir}}"

    # Icon for directory display
    # Default: "\uf07b" (Folder icon)
    icon: "\uf07b"

    # Color for the display
    # Default: "gray"
    color: gray

    # Maximum length for directory name (0 = no limit)
    # Truncates from middle with ellipsis: "my-long-dir…-name"
    # Default: 20
    max_length: 20

    # Regex patterns to ignore - hide component when directory basename matches
    # Example: ["node_modules", "^\\..*"] to hide node_modules and hidden dirs
    # Default: [] (show all directories)
    ignore: []

  # ---------------------------------------------------------------------------
  # RATELIMIT.FIVEHOUR COMPONENT
  # Shows 5-hour rate limit usage from Anthropic API
  # ---------------------------------------------------------------------------
  ratelimit.fivehour:
    # Display template with available variables (pre-colored):
    #   {{.Icon}}        - The configured icon/label (uses status color)
    #   {{.Utilization}} - Usage percentage with % sign (uses status color)
    #   {{.Remaining}}   - Formatted remaining time (uses info color)
    #   {{.EndTime}}     - Formatted reset time (uses info color)
    #   {{.EndTimeRaw}}  - Raw reset time for custom formatting
    # Default: "{{.Icon}} {{.Utilization}}{{if .EndTime}} {{.Remaining}} {{.EndTime}}{{end}}"
    template: "{{.Icon}} {{.Utilization}}{{if .EndTime}} {{.Remaining}} {{.EndTime}}{{end}}"

    # Icon/label to display
    # Default: "5h"
    icon: "5h"

    # Time format for end time (Go time format)
    # Examples: "3:04 PM" (12-hour), "15:04" (24-hour)
    # Default: "3:04 PM"
    end_time_format: "3:04 PM"

    # Threshold percentages for color changes
    # Default: 60.0
    warning_threshold: 60.0
    # Default: 80.0
    critical_threshold: 80.0

    # Colors for different usage levels (applies to icon and utilization)
    # Default: "green"
    normal_color: green
    # Default: "yellow"
    warning_color: yellow
    # Default: "red"
    critical_color: red

    # Color for supplementary info (remaining time, end time)
    # Default: "gray"
    color: gray

  # ---------------------------------------------------------------------------
  # RATELIMIT.SEVENDAY COMPONENT
  # Shows 7-day rate limit usage from Anthropic API
  # ---------------------------------------------------------------------------
  ratelimit.sevenday:
    # Display template with available variables (pre-colored):
    #   {{.Icon}}        - The configured icon/label (uses status color)
    #   {{.Utilization}} - Usage percentage with % sign (uses status color)
    #   {{.Remaining}}   - Formatted remaining time (uses info color)
    #   {{.EndTime}}     - Formatted reset time (uses info color)
    #   {{.EndTimeRaw}}  - Raw reset time for custom formatting
    # Default: "{{.Icon}} {{.Utilization}}{{if .EndTime}} {{.Remaining}}{{end}}"
    template: "{{.Icon}} {{.Utilization}}{{if .EndTime}} {{.Remaining}}{{end}}"

    # Icon/label to display
    # Default: "7d"
    icon: "7d"

    # Time format for end time (Go time format)
    # Examples: "Mon 3:04 PM", "Jan 2 15:04"
    # Default: "Mon 3:04 PM"
    end_time_format: "Mon 3:04 PM"

    # Threshold percentages for color changes
    # Default: 60.0
    warning_threshold: 60.0
    # Default: 80.0
    critical_threshold: 80.0

    # Colors for different usage levels (applies to icon and utilization)
    # Default: "green"
    normal_color: green
    # Default: "yellow"
    warning_color: yellow
    # Default: "red"
    critical_color: red

    # Color for supplementary info (remaining time)
    # Default: "gray"
    color: gray

  # ---------------------------------------------------------------------------
  # CHANGES COMPONENT
  # Shows lines added/removed in Git-style format
  # ---------------------------------------------------------------------------
  changes:
    # Display template with available variables (all pre-colored):
    #   {{.Icon}}        - The configured icon (uses component color)
    #   {{.Added}}       - Number of lines added (uses added color)
    #   {{.Removed}}     - Number of lines removed (uses removed color)
    #   {{.AddedSign}}   - The configured added sign (uses added color)
    #   {{.RemovedSign}} - The configured removed sign (uses removed color)
    # Default: "{{.AddedSign}}{{.Added}}{{.RemovedSign}}{{.Removed}}"
    template: "{{.AddedSign}}{{.Added}}{{.RemovedSign}}{{.Removed}}"

    # Icon to display with changes
    # Default: "" (no icon)
    icon: ""

    # Color for the icon/component (if icon is used)
    # Default: "" (no color override)
    color: ""

    # Signs/prefixes for added and removed lines
    # Default: "+"
    added_sign: "+"
    # Default: "-"
    removed_sign: "-"

    # Colors for added/removed lines
    # Default: "green"
    added_color: green
    # Default: "red"
    removed_color: red

    # Whether to show component when both values are zero
    # Default: false
    show_zero: false

  # ---------------------------------------------------------------------------
  # DURATION COMPONENT
  # Shows session and API call durations
  # ---------------------------------------------------------------------------
  duration:
    # Display template with available variables:
    #   {{.Icon}}          - The main duration icon
    #   {{.APIIcon}}       - The API duration icon
    #   {{.TotalDuration}} - Formatted total duration (e.g. "2m 15s")
    #   {{.APIDuration}}   - Formatted API duration (e.g. "1m 30s")
    #   {{.TotalMs}}       - Raw total duration in milliseconds
    #   {{.APIMs}}         - Raw API duration in milliseconds
    # Default: "{{.Icon}} {{.TotalDuration}}{{if .APIDuration}} {{.APIIcon}} {{.APIDuration}}{{end}}"
    template: "{{.Icon}} {{.TotalDuration}}{{if .APIDuration}} {{.APIIcon}} {{.APIDuration}}{{end}}"

    # Icon for total duration
    # Default: "\uF520" (Stopwatch icon)
    icon: "\uF520"

    # Icon for API duration
    # Default: "\U000F1616" (Connected plug icon)
    api_icon: "\U000F1616"

    # Color for the duration display
    # Default: "gray"
    color: gray

    # Whether to show API duration alongside total duration
    # Default: true
    show_api_duration: true

  # ---------------------------------------------------------------------------
  # VERSION COMPONENT
  # Shows Claude Code version
  # ---------------------------------------------------------------------------
  version:
    # Display template with available variables:
    #   {{.Version}} - The Claude Code version (e.g. "1.0.89")
    #   {{.Icon}}    - The configured icon (if any)
    # Default: "v{{.Version}}"
    template: "v{{.Version}}"

    # Icon to display with version
    # Default: "" (no icon)
    icon: ""

    # Color for the version display
    # Default: "gray"
    color: gray

  # ---------------------------------------------------------------------------
  # GIT.BRANCH COMPONENT
  # Shows git branch name or @hash for detached HEAD
  # ---------------------------------------------------------------------------
  git.branch:
    # Display template with available variables:
    #   {{.Icon}}   - The configured icon
    #   {{.Branch}} - Branch name or @hash for detached HEAD
    # Default: "{{.Icon}} {{.Branch}}"
    template: "{{.Icon}} {{.Branch}}"

    # Icon for branch display (Nerd Font git branch icon)
    # Default: "\ue725"
    icon: "\ue725"

    # Color for the display
    # Default: "gray"
    color: gray

    # Maximum length for branch name (0 = no limit)
    # Truncates from middle with ellipsis: "feature/lo…ng-name"
    # Default: 20
    max_length: 20

  # ---------------------------------------------------------------------------
  # GIT.STATUS COMPONENT
  # Shows working tree status (staged, modified, untracked, conflicts)
  # ---------------------------------------------------------------------------
  git.status:
    # Display template with available variables (all pre-colored):
    #   {{.Staged}}    - Staged files indicator (e.g., "3")
    #   {{.Modified}}  - Modified files indicator (e.g., "2")
    #   {{.Untracked}} - Untracked files indicator (e.g., "1")
    #   {{.Conflicts}} - Conflicted files indicator (e.g., "2")
    # Default uses conditionals to only show non-zero counts with spacing
    template: "{{if .Staged}} {{.Staged}}{{end}}{{if .Modified}} {{.Modified}}{{end}}{{if .Untracked}} {{.Untracked}}{{end}}{{if .Conflicts}} {{.Conflicts}}{{end}}"

    # Icons for each status type (Nerd Font icons)
    # Default: "\uf05d " (check circle)
    staged_icon: "\uf05d "
    # Default: "\uf044 " (pencil)
    modified_icon: "\uf044 "
    # Default: "\uf420 " (question)
    untracked_icon: "\uf420 "
    # Default: "\uf421 " (exclamation)
    conflict_icon: "\uf421 "

    # Colors for each status type
    # Default: "green"
    staged_color: green
    # Default: "yellow"
    modified_color: yellow
    # Default: "gray"
    untracked_color: gray
    # Default: "red"
    conflict_color: red

  # ---------------------------------------------------------------------------
  # GIT.SYNC COMPONENT
  # Shows commits ahead/behind upstream
  # ---------------------------------------------------------------------------
  git.sync:
    # Display template with available variables (all pre-colored):
    #   {{.Ahead}}  - Commits ahead indicator (e.g., "↑2")
    #   {{.Behind}} - Commits behind indicator (e.g., "↓3")
    # Default uses conditionals to only show non-zero counts
    template: "{{if .Ahead}} {{.Ahead}}{{end}}{{if .Behind}} {{.Behind}}{{end}}"

    # Icons for ahead/behind (Nerd Font icons with trailing space)
    # Default: "\ueaa1 " (arrow up)
    ahead_icon: "\ueaa1 "
    # Default: "\uea9a " (arrow down)
    behind_icon: "\uea9a "

    # Colors for ahead/behind
    # Default: "green"
    ahead_color: green
    # Default: "red"
    behind_color: red

  # ---------------------------------------------------------------------------
  # GIT.STASH COMPONENT
  # Shows git stash count
  # ---------------------------------------------------------------------------
  git.stash:
    # Display template with available variables:
    #   {{.Icon}}  - The configured icon
    #   {{.Count}} - Number of stash entries
    # Default: "{{.Icon}} {{.Count}}"
    template: "{{.Icon}} {{.Count}}"

    # Icon for stash display (Nerd Font inbox icon)
    # Default: "\uf48d" (nf-fa-inbox)
    icon: "\uf48d"

    # Color for the display
    # Default: "cyan"
    color: cyan

# ============================================================================
# COLOR OPTIONS
# ============================================================================
# Available colors for any color configuration:
#   - red
#   - green
#   - yellow
#   - blue
#   - magenta
#   - cyan
#   - gray (default for unknown colors)
#   - grey (alternative spelling)

# ============================================================================
# TEMPLATE FUNCTIONS
# ============================================================================
# Templates use Go's text/template syntax with these additional functions:
#   - printf    - Format strings (e.g., {{printf "%.0f" .Percentage}})
#   - if/else   - Conditional rendering (e.g., {{if .Condition}}...{{end}})
#   - formatK   - Format number with K suffix (built-in for some components)
#   - colorize  - Apply color to text (built-in for some components)

# ============================================================================
# NOTES
# ============================================================================
# 1. All paths are relative to the configuration file location
# 2. Component order in 'active' list determines display order
# 3. Providers are automatically created based on component requirements
# 4. Cache is session-isolated using Claude session ID
# 5. Icons require a Nerd Font to display correctly
# 6. Empty string values typically mean "use default" or "disabled"
# 7. ratelimit components fetch data from Anthropic OAuth API (requires valid token)

# ============================================================================
# EXAMPLE CONFIGURATIONS
# ============================================================================

# Minimal configuration - just model and context:
# active: ["model", "context"]

# Disable caching for all providers:
# cache:
#   enabled: false

# Custom separator:
# separator:
#   symbol: " • "
#   color: cyan

# Override component template:
# components:
#   model:
#     template: "[{{.ShortName}}]"

# Cache in specific directory:
# cache:
#   dir: "/tmp/ccstatus-cache"

# Custom model colors:
# components:
#   model:
#     colors:
#       opus: magenta
#       sonnet: cyan
#       haiku: green

# Adjust token warning thresholds:
# components:
#   context:
#     warning_threshold: 70.0
#     critical_threshold: 85.0

# Custom rate limit display (show only percentage):
# components:
#   ratelimit.fivehour:
#     template: "{{.Icon}} {{.Utilization}}"
#   ratelimit.sevenday:
#     template: "{{.Icon}} {{.Utilization}}"

# Multi-line status layout using newline component:
# active:
#   - model
#   - context
#   - newline
#   - ratelimit.fivehour
#   - ratelimit.sevenday
#   - version

# Multi-line with git info on second line:
# active:
#   - model
#   - context
#   - ratelimit.fivehour
#   - ratelimit.sevenday
#   - duration
#   - version
#   - newline
#   - cwd
#   - git.branch
#   - git.status
#   - git.sync
#   - git.stash
